// https://www.youtube.com/watch?v=Yw-SYSG-028
// https://github.com/bradtraversy/wordbeater/tree/master/dist/js
window.addEventListener('load', init);

//Globals:
let time = 30;
let score = 0;
let num_seqs = 0;
let errors = 0;
let isPlaying;

// DOM Elements
const wordInput = document.querySelector('#word-input');
const currentWord = document.querySelector('#current-word');
const scoreDisplay = document.querySelector('#score');
const timeDisplay = document.querySelector('#time');
const message = document.querySelector('#message');
const seconds = document.querySelector('#seconds');
const highscoreDisplay = document.querySelector('#highscore');

const words = [32324, 23235, 51434, 51224, 13242, 43443, 32244, 33451, 32314,
    53433, 35142, 31551, 13112, 24335, 41122, 23413, 34131, 33212, 41514,
    35315, 12243, 43112, 31352, 45544, 31241, 13222, 33242, 21135, 34332,
    15542, 41411, 15134, 33311, 23242, 43512, 52225, 25532, 23551, 53523,
    24514, 14245, 21122, 42114, 32235, 24141, 41255, 52111, 34344, 55533,
    14252, 32512, 33415, 14545, 21224, 35334, 55212, 12452, 42213, 21131,
    32133, 44141, 33131, 23343, 25345, 25233, 33512, 15255, 45512, 23555,
    35242, 22511, 22113, 15455, 34415, 32323, 45345, 31422, 53414, 14125,
    25314, 35421, 32134, 14145, 33134, 35253, 43125, 51154, 51114, 24344,
    52135, 24353, 25515, 42413, 44232, 22151, 52251, 24441, 55114, 35255,
    32143, 44245, 31412, 24543, 23355, 41331, 54135, 21252, 53355, 42343,
    22535, 15252, 25412, 25435, 52314, 12442, 31435, 42524, 51154, 11553,
    33214, 14444, 31134, 31431, 31143, 12231, 35433, 21351, 55423, 51234,
    53155, 34545, 22223, 35421, 45311, 13314, 42534, 51412, 42242, 53135,
    34425, 53154, 14434, 53154, 22122, 52132, 33134, 45211, 32451, 21322,
    53325, 34111, 22512, 51524, 15221, 35551, 52442, 53144, 51553, 52324,
    22551, 15421, 22324, 15143, 25535, 33541, 31135, 42311, 15353, 55353,
    11243, 54444, 35451, 35214, 22321, 13534, 24155, 32313, 11224, 25412,
    42153, 13124, 11251, 43425, 42343, 23151, 54232, 41213, 54224, 44414,
    45551, 54534, 32151, 44443, 44334, 21352, 42531, 51143, 25245, 54144,
    31331, 53531, 21534, 51323, 32151, 13245, 22142, 52332, 35125, 12353,
    44342, 14123, 11155, 11112, 24354, 12421, 12251, 31334, 22224, 13355,
    24345, 34244, 52512, 42322, 33254, 21144, 21522, 34221, 35524, 21533,
    23413, 22314, 54325, 45354, 35351, 14141, 51153, 32331, 23112, 32325,
    42341, 13234, 32442, 41423, 45315, 23243, 43121, 15142, 51514, 34343,
    42224, 55134, 45434, 23352, 54522, 14415, 53331, 54312, 24541, 12513,
    52554, 21113, 45152, 33555, 52351, 25535, 23234, 45313, 32213, 55124,
    33553, 55214, 21145, 21113, 45415, 44142, 21232, 13441, 12451, 44314,
    15111, 12343, 51115, 11552, 14344, 14353, 53315, 34555, 53145, 44353,
    51441, 33413, 21112, 42414, 44352, 44543, 31124, 44441, 22233, 15413,
    25525, 42124, 41244, 25431, 25211, 43545, 52342, 52435, 22241, 15352,
    53234, 53413, 22112, 15341, 33442, 51344, 44443, 31134, 33322, 45525,
    45432, 32214, 42213, 22232, 45414, 24242, 21125, 42215, 33124, 52443,
    25415, 54253, 45421, 41525, 24322, 41114, 13343, 31242, 44512, 54112,
    25423, 51325, 45112, 54131, 52121, 23345, 23125, 41321, 51544, 33123,
    21414, 23324, 23413, 44522, 43551, 12425, 24244, 35112, 55515, 43115,
    55454, 54234, 15315, 33531, 34544, 33254, 31145, 32123, 12514, 53431,
    43131, 45315, 15143, 55232, 43544, 25543, 41344, 41112, 11453, 42135,
    42213, 25353, 32251, 53433, 13514, 35521, 13115, 45135, 32325, 35431,
    25252, 54142, 55415, 42115, 53211, 31212, 24442, 23312, 53151, 44554,
    21512, 53241, 25424, 35432, 44421, 52323, 21142, 23221, 53135, 42242,
    43325, 43554, 43435, 55143, 44245, 21315, 53544, 45253, 32343, 13155,
    24233, 33352, 55425, 51331, 21332, 12455, 35312, 52422, 42241, 12221,
    44525, 45321, 22232, 53433, 35154, 14323, 15345, 52454, 32514, 34235,
    52334, 23121, 42121, 53154, 24152, 53534, 54553, 24432, 42443, 31233,
    53313, 23144, 45115, 43411, 54325, 53334, 34313, 35512, 33334, 51324,
    12525, 32523, 45355, 12523, 12243, 24312, 42412, 15211, 52554, 12453,
    22345, 35543, 42112, 14342, 45445, 53132, 45241, 32415, 12152, 22334,
    44131, 51241, 55515, 35525, 14215, 42215, 43335, 22543, 55251, 15131,
    54431, 52214, 12531, 31343, 55444, 52333, 24213, 42344, 32114, 34321,
    11351, 53141, 13452, 11435, 24411, 55554, 13534, 33142, 51524, 14425,
    41513, 25314, 35152, 33441, 41321, 22225, 23522, 33332, 55523, 12545,
    14313, 13344, 23535, 25311, 13352, 44555, 34114, 54425, 12421, 33254,
    25543, 54322, 45332, 51243, 13245, 15241, 11412, 24453, 31552, 41345,
    41134, 12311, 51442, 35124, 43312, 43532, 25341, 22431, 23133, 43412,
    44325, 25551, 44254, 54222, 22235, 32343, 14412, 12235, 21314, 34315,
    32253, 52211, 31435, 15524, 11131, 11213, 15113, 54514, 41145, 11344,
    52315, 55411, 14513, 23141, 35353, 53423, 45113, 15133, 23444, 42231,
    13532, 22132, 42352, 21121, 54114, 45142, 51315, 21222, 54241, 44214,
    14514, 42151, 24315, 32445, 21125, 21351, 44355, 45253, 12234, 52114,
    51453, 41345, 54522, 13423, 14455, 11312, 35134, 14111, 12114, 41513,
    55335, 23244, 11424, 45513, 42353, 21225, 43125, 13143, 25155, 41522,
    14153, 52433, 14412, 24213, 42111, 13422, 55231, 53553, 25414, 53112,
    11455, 54132, 42224, 31434, 32414, 45132, 31155, 43324, 42552, 11341,
    25254, 21325, 22135, 14243, 12355, 35351, 21352, 31232, 14512, 53354,
    15431, 43132, 23222, 53252, 52223, 52313, 32523, 54255, 42313, 13131,
    33453, 45121, 52232, 23114, 45322, 35433, 34242, 32222, 33244, 51322,
    42231, 53253, 54451, 14533, 41414, 31431, 55112, 31355, 44344, 32212,
    25442, 15434, 51234, 51231, 15552, 51424, 25142, 33514, 23334, 34333,
    42132, 54332, 33422, 21133, 54215, 45115, 52444, 44432, 35345, 22123,
    33115, 44545, 34542, 21411, 22135, 54132, 23441, 12214, 43142, 14442,
    41223, 53151, 53254, 44243, 32455, 52154, 21123, 32455, 43524, 52451,
    44521, 53114, 21153, 52152, 13145, 41554, 35511, 35452, 54212, 11421,
    55132, 22411, 35323, 31134, 15335, 23134, 52142, 22454, 51335, 54513,
    32552, 34321, 54521, 13524, 55135, 51545, 54122, 54225, 41525, 45151,
    24451, 23521, 23123, 23332, 15234, 45252, 11512, 51354, 13554, 22422,
    34122, 15344, 32521, 41454, 15513, 34321, 53525, 21525, 31131, 23134,
    52153, 33554, 25222, 52544, 33242, 51342, 31132, 53535, 15224, 43452,
    24431, 44351, 14423, 33112, 34252, 34413, 52122, 32123, 43114, 25331,
    34311, 12324, 24321, 42245, 45155, 42532, 13425, 23213, 41444, 43423,
    21121, 45414, 43411, 41355, 35332, 24515, 33113, 53335, 51253, 23432,
    35323, 11531, 15253, 34353, 53252, 11531, 55224, 12322, 52152, 32124,
    32352, 11534, 42554, 44422, 22312, 12115, 53442, 31425, 43122, 25242,
    35432, 21121, 34253, 54513, 23343, 23344, 12543, 45224, 33242, 15134,
    15555, 53213, 42443, 51244, 22155, 22221, 23425, 53235, 32222, 41421,
    15443, 13121, 45413, 45552, 51213, 15133, 35451, 33222, 44344, 41344,
    34354, 35352, 45514, 41531, 13423, 45333, 25351, 34114, 32133, 15143,
    15422, 51215, 54351, 13221, 44324, 21425, 25532, 53214, 42211, 34542,
    12253, 24215, 22225, 13524, 21254, 51455, 51151, 13355, 41215, 45323,
    22252, 33541, 52211, 13433, 13325, 44424, 34553, 25233, 42435, 44523,
    45134, 41514, 22414, 15554, 13255, 53144, 43334, 52541, 41222, 35514,
    53235, 21543, 44543, 41512, 52444, 13214, 34251, 11245, 34414, 53352,
    43222, 24122, 53212, 13112, 52533, 24323, 23324, 55532, 53515, 42524,
    24444, 51532, 54124, 52513, 22415, 43351, 34342, 53151, 45413, 25224,
    33441, 25353, 53415, 52312, 11354, 43553, 51433, 41212, 24253, 33514,
    45354, 55352, 43455, 21332, 23511, 34241, 55122, 45541, 34125, 51151,
    15214, 23113, 34251, 15154, 52355, 23431, 51132, 35242, 24514, 55124,
    34544, 24552, 12341, 21455, 22454, 25312, 35341, 24535, 52545, 41535,
    25441, 25343, 21222, 53234, 25333, 12512, 23521, 33312, 12243, 35225,
    44212, 51211, 41332, 14424, 41452, 12421, 14455, 35531, 31351, 23243];

function init(){
    showWord(words);
    // matching word input
    wordInput.addEventListener('input', startMatch);

    // run countdown every second 
    setInterval(countdown, 1000);
    // check game status
    setInterval(checkStatus, 50);
}

function startMatch() {
    if(wordInput.value.length === 5){
        if(matchWords()){
            console.log("match");
            showWord(words);
            wordInput.value = "";
            num_seqs++;
            score++;
        }else {
            console.log("wrong");
            showWord(words);
            wordInput.value = "";
            num_seqs++;
            errors++;
        }
    }

    if(score === -1){
        scoreDisplay.innerHTML = 0;
    } else{
        scoreDisplay.innerHTML = score;
    }
}

function matchWords() {
    console.log(wordInput.value.length);
    if(wordInput.value === currentWord.innerHTML){
        message.innerHTML = "correct";
        return true;
    }else {
        message.innerHTML = "";
        return false;
    }
}

function showWord(words){
    const randIndex = Math.floor(Math.random() * words.length);
    currentWord.innerHTML = words[randIndex];
}


function countdown() {
    if(time > 0){
        time--;
    }else if(time === 0) {
        isPlaying = false;
    }

    timeDisplay.innerHTML = time;
}

function checkStatus() {
    if(!isPlaying && time === 0){
        window.confirm(`n√∫mero de secuencias ${num_seqs}, aciertos ${score}, erorres ${errors}.`);
    }
}


